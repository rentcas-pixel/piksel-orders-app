{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/config/index.ts"],"sourcesContent":["export const config = {\n  pocketbase: {\n    url: process.env.NEXT_PUBLIC_POCKETBASE_URL || 'https://get.piksel.lt',\n    collection: 'orders'\n  },\n  supabase: {\n    url: process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://titkwifsatjemnquyrij.supabase.co',\n    anonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'sb_publishable_bXgkXQ6_FY3CdnPRHZ-onA_p-bjSFM_'\n  },\n  app: {\n    name: 'Piksel Orders',\n    description: 'Modernus u≈æsakym≈≥ valdymo sistema'\n  }\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,SAAS;IACpB,YAAY;QACV,KAAK,QAAQ,GAAG,CAAC,0BAA0B,IAAI;QAC/C,YAAY;IACd;IACA,UAAU;QACR,KAAK,QAAQ,GAAG,CAAC,wBAAwB,IAAI;QAC7C,SAAS,QAAQ,GAAG,CAAC,6BAA6B,IAAI;IACxD;IACA,KAAK;QACH,MAAM;QACN,aAAa;IACf;AACF","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/lib/pocketbase.ts"],"sourcesContent":["import { config } from '@/config';\nimport { Order } from '@/types';\n\nconst POCKETBASE_URL = config.pocketbase.url;\nconst COLLECTION = config.pocketbase.collection;\n\n// Connection pool and retry configuration\nconst REQUEST_TIMEOUT = 10000; // 10 seconds\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // 1 second\n\nexport class PocketBaseService {\n  private static connectionPool = new Map<string, { lastUsed: number; inUse: boolean }>();\n  private static requestQueue: Array<() => Promise<unknown>> = [];\n  private static isProcessingQueue = false;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private static async makeRequest(endpoint: string, options: RequestInit = {}): Promise<any> {\n    const url = `${POCKETBASE_URL}/api/collections/${COLLECTION}${endpoint}`;\n    \n    // Add timeout to fetch\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), REQUEST_TIMEOUT);\n    \n    try {\n      const response = await fetch(url, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Cache-Control': 'max-age=300', // 5 minutes cache\n          ...options.headers,\n        },\n        signal: controller.signal,\n        ...options,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      clearTimeout(timeoutId);\n      \n      if (error instanceof Error && error.name === 'AbortError') {\n        console.error('‚è∞ PocketBase request timeout:', url);\n        throw new Error('Request timeout');\n      }\n      \n      console.error('‚ùå PocketBase request failed:', error);\n      throw error;\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private static async makeRequestWithRetry(endpoint: string, options: RequestInit = {}, retries = MAX_RETRIES): Promise<any> {\n    try {\n      return await this.makeRequest(endpoint, options);\n    } catch (error) {\n      if (retries > 0 && error instanceof Error && error.message !== 'Request timeout') {\n        console.log(`üîÑ Retrying request (${retries} attempts left)...`);\n        await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));\n        return this.makeRequestWithRetry(endpoint, options, retries - 1);\n      }\n      throw error;\n    }\n  }\n\n  private static async processQueue() {\n    if (this.isProcessingQueue || this.requestQueue.length === 0) return;\n    \n    this.isProcessingQueue = true;\n    \n    while (this.requestQueue.length > 0) {\n      const request = this.requestQueue.shift();\n      if (request) {\n        try {\n          await request();\n        } catch {\n          console.error('‚ùå Queue request failed');\n        }\n      }\n    }\n    \n    this.isProcessingQueue = false;\n  }\n\n  private static queueRequest<T>(requestFn: () => Promise<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n      this.requestQueue.push(async () => {\n        try {\n          const result = await requestFn();\n          resolve(result);\n        } catch (error) {\n          reject(error);\n        }\n      });\n      \n      this.processQueue();\n    });\n  }\n\n  static async getOrders(params: {\n    page?: number;\n    perPage?: number;\n    sort?: string;\n    filter?: string;\n  } = {}): Promise<{ items: Order[]; totalItems: number; totalPages: number }> {\n    const { page = 1, perPage = 25, sort = '-updated', filter = '' } = params; // Reduced perPage from 50 to 25\n    \n    const queryParams = new URLSearchParams({\n      page: page.toString(),\n      perPage: perPage.toString(),\n      sort,\n      ...(filter && { filter }),\n    });\n\n    const url = `/records?${queryParams}`;\n    console.log('üåê PocketBase request URL:', url);\n    console.log('üåê PocketBase filter:', filter);\n    \n    const response = await this.makeRequestWithRetry(url);\n    \n    console.log('üì¶ PocketBase raw response:', response);\n    \n    return {\n      items: response.items || [],\n      totalItems: response.totalItems || 0,\n      totalPages: response.totalPages || 0,\n    };\n  }\n\n  static async getOrder(id: string): Promise<Order> {\n    return this.makeRequestWithRetry(`/records/${id}`);\n  }\n\n  static async searchOrders(query: string): Promise<Order[]> {\n    // Debounce search requests\n    return this.queueRequest(async () => {\n      const response = await this.makeRequestWithRetry(`/records?filter=(client~\"${query}\" || agency~\"${query}\" || invoice_id~\"${query}\")&perPage=25`);\n      return response.items || [];\n    });\n  }\n\n  static async updateOrder(id: string, data: Partial<Order>): Promise<Order> {\n    return this.makeRequestWithRetry(`/records/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n    });\n  }\n\n  static async deleteOrder(id: string): Promise<void> {\n    await this.makeRequestWithRetry(`/records/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  static async getQuoteByOrderId(orderId: string): Promise<{ link: string; viaduct_link: string } | null> {\n    try {\n      const url = `${POCKETBASE_URL}/api/collections/quotes/records?filter=order_id=\"${orderId}\"&perPage=1`;\n      console.log('üîç Trying to fetch quote from:', url);\n      \n      const response = await fetch(url, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Cache-Control': 'max-age=600', // 10 minutes cache for quotes\n        },\n        signal: AbortSignal.timeout(5000), // 5 second timeout for quotes\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data.items?.[0] || null;\n    } catch {\n      console.log('No quote found for order:', orderId);\n      return null;\n    }\n  }\n\n  // Batch operations for better performance\n  static async getOrdersBatch(orderIds: string[]): Promise<Order[]> {\n    if (orderIds.length === 0) return [];\n    \n    const batchSize = 10; // Process in batches of 10\n    const results: Order[] = [];\n    \n    for (let i = 0; i < orderIds.length; i += batchSize) {\n      const batch = orderIds.slice(i, i + batchSize);\n      const batchFilter = batch.map(id => `id=\"${id}\"`).join(' || ');\n      \n      try {\n        const response = await this.makeRequestWithRetry(`/records?filter=(${batchFilter})&perPage=${batchSize}`);\n        results.push(...(response.items || []));\n      } catch (error) {\n        console.error('‚ùå Batch request failed:', error);\n      }\n    }\n    \n    return results;\n  }\n\n  // Health check method\n  static async healthCheck(): Promise<boolean> {\n    try {\n      const response = await fetch(`${POCKETBASE_URL}/api/health`, {\n        signal: AbortSignal.timeout(3000),\n      });\n      return response.ok;\n    } catch {\n      return false;\n    }\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/hooks/useCache.ts"],"sourcesContent":["import { useState, useCallback, useRef, useEffect } from 'react';\n\ninterface CacheEntry<T> {\n  data: T;\n  timestamp: number;\n  ttl: number; // Time to live in milliseconds\n  accessCount: number; // Track how often this data is accessed\n}\n\nexport function useCache<T>(defaultTtl: number = 15 * 60 * 1000) { // 15 minutes default (increased from 5)\n  const [cache, setCache] = useState<Map<string, CacheEntry<T>>>(new Map());\n  const cleanupInterval = useRef<NodeJS.Timeout | undefined>(undefined);\n\n  // Cleanup expired entries every 5 minutes\n  useEffect(() => {\n    cleanupInterval.current = setInterval(() => {\n      setCache(prev => {\n        const now = Date.now();\n        const newCache = new Map();\n        \n        for (const [key, entry] of prev) {\n          if (now - entry.timestamp <= entry.ttl) {\n            newCache.set(key, entry);\n          }\n        }\n        \n        return newCache;\n      });\n    }, 5 * 60 * 1000); // 5 minutes\n\n    return () => {\n      if (cleanupInterval.current) {\n        clearInterval(cleanupInterval.current);\n      }\n    };\n  }, []);\n\n  const get = useCallback((key: string): T | null => {\n    const entry = cache.get(key);\n    if (!entry) return null;\n\n    const now = Date.now();\n    if (now - entry.timestamp > entry.ttl) {\n      // Entry expired, remove it\n      setCache(prev => {\n        const newCache = new Map(prev);\n        newCache.delete(key);\n        return newCache;\n      });\n      return null;\n    }\n\n    // Update access count for LRU-like behavior\n    setCache(prev => {\n      const newCache = new Map(prev);\n      const existingEntry = newCache.get(key);\n      if (existingEntry) {\n        newCache.set(key, { ...existingEntry, accessCount: existingEntry.accessCount + 1 });\n      }\n      return newCache;\n    });\n\n    return entry.data;\n  }, [cache]);\n\n  const set = useCallback((key: string, data: T, ttl?: number) => {\n    setCache(prev => {\n      const newCache = new Map(prev);\n      \n      // If cache is getting too large, remove least accessed entries\n      if (newCache.size > 100) {\n        const entries = Array.from(newCache.entries());\n        entries.sort((a, b) => a[1].accessCount - b[1].accessCount);\n        const toRemove = entries.slice(0, 20); // Remove 20 least accessed\n        toRemove.forEach(([key]) => newCache.delete(key));\n      }\n      \n      newCache.set(key, {\n        data,\n        timestamp: Date.now(),\n        ttl: ttl || defaultTtl,\n        accessCount: 1\n      });\n      return newCache;\n    });\n  }, [defaultTtl]);\n\n  const clear = useCallback(() => {\n    setCache(new Map());\n  }, []);\n\n  const remove = useCallback((key: string) => {\n    setCache(prev => {\n      const newCache = new Map(prev);\n      newCache.delete(key);\n      return newCache;\n    });\n  }, []);\n\n  return { get, set, clear, remove };\n}\n"],"names":[],"mappings":";;;;AAAA;;AASO,SAAS,SAAY,aAAqB,KAAK,KAAK,IAAI;IAC7D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAA6B,IAAI;IACnE,MAAM,kBAAkB,IAAA,+MAAM,EAA6B;IAE3D,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACR,gBAAgB,OAAO,GAAG,YAAY;YACpC,SAAS,CAAA;gBACP,MAAM,MAAM,KAAK,GAAG;gBACpB,MAAM,WAAW,IAAI;gBAErB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,KAAM;oBAC/B,IAAI,MAAM,MAAM,SAAS,IAAI,MAAM,GAAG,EAAE;wBACtC,SAAS,GAAG,CAAC,KAAK;oBACpB;gBACF;gBAEA,OAAO;YACT;QACF,GAAG,IAAI,KAAK,OAAO,YAAY;QAE/B,OAAO;YACL,IAAI,gBAAgB,OAAO,EAAE;gBAC3B,cAAc,gBAAgB,OAAO;YACvC;QACF;IACF,GAAG,EAAE;IAEL,MAAM,MAAM,IAAA,oNAAW,EAAC,CAAC;QACvB,MAAM,QAAQ,MAAM,GAAG,CAAC;QACxB,IAAI,CAAC,OAAO,OAAO;QAEnB,MAAM,MAAM,KAAK,GAAG;QACpB,IAAI,MAAM,MAAM,SAAS,GAAG,MAAM,GAAG,EAAE;YACrC,2BAA2B;YAC3B,SAAS,CAAA;gBACP,MAAM,WAAW,IAAI,IAAI;gBACzB,SAAS,MAAM,CAAC;gBAChB,OAAO;YACT;YACA,OAAO;QACT;QAEA,4CAA4C;QAC5C,SAAS,CAAA;YACP,MAAM,WAAW,IAAI,IAAI;YACzB,MAAM,gBAAgB,SAAS,GAAG,CAAC;YACnC,IAAI,eAAe;gBACjB,SAAS,GAAG,CAAC,KAAK;oBAAE,GAAG,aAAa;oBAAE,aAAa,cAAc,WAAW,GAAG;gBAAE;YACnF;YACA,OAAO;QACT;QAEA,OAAO,MAAM,IAAI;IACnB,GAAG;QAAC;KAAM;IAEV,MAAM,MAAM,IAAA,oNAAW,EAAC,CAAC,KAAa,MAAS;QAC7C,SAAS,CAAA;YACP,MAAM,WAAW,IAAI,IAAI;YAEzB,+DAA+D;YAC/D,IAAI,SAAS,IAAI,GAAG,KAAK;gBACvB,MAAM,UAAU,MAAM,IAAI,CAAC,SAAS,OAAO;gBAC3C,QAAQ,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,CAAC,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,WAAW;gBAC1D,MAAM,WAAW,QAAQ,KAAK,CAAC,GAAG,KAAK,2BAA2B;gBAClE,SAAS,OAAO,CAAC,CAAC,CAAC,IAAI,GAAK,SAAS,MAAM,CAAC;YAC9C;YAEA,SAAS,GAAG,CAAC,KAAK;gBAChB;gBACA,WAAW,KAAK,GAAG;gBACnB,KAAK,OAAO;gBACZ,aAAa;YACf;YACA,OAAO;QACT;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,QAAQ,IAAA,oNAAW,EAAC;QACxB,SAAS,IAAI;IACf,GAAG,EAAE;IAEL,MAAM,SAAS,IAAA,oNAAW,EAAC,CAAC;QAC1B,SAAS,CAAA;YACP,MAAM,WAAW,IAAI,IAAI;YACzB,SAAS,MAAM,CAAC;YAChB,OAAO;QACT;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAK;QAAK;QAAO;IAAO;AACnC","debugId":null}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/OrdersTable.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Order } from '@/types';\nimport { PocketBaseService } from '@/lib/pocketbase';\nimport { format } from 'date-fns';\nimport { useCache } from '@/hooks/useCache';\n\n\ninterface OrdersTableProps {\n  searchQuery: string;\n  filters: {\n    status: string;\n    month: string;\n    year: string;\n    client: string;\n    agency: string;\n    media_received: string;\n  };\n  onEditOrder: (order: Order) => void;\n}\n\nexport function OrdersTable({ searchQuery, filters, onEditOrder }: OrdersTableProps) {\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalItems, setTotalItems] = useState(0);\n  const [totalSum, setTotalSum] = useState(0);\n  const [sortField, setSortField] = useState<string>('updated');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n  \n  // Cache for sums\n  const sumsCache = useCache<number>(10 * 60 * 1000); // 10 minutes\n\n  // Optimized sum calculation with caching and reduced load\n  const calculateSumAsync = useCallback(async (filterString: string) => {\n    // Check if we already have the sum for this filter\n    const cacheKey = `sum_${filterString}`;\n    const cachedSum = sumsCache.get(cacheKey);\n    if (cachedSum) {\n      setTotalSum(cachedSum);\n      return;\n    }\n\n    try {\n      // Use smaller batch size to reduce server load\n      const allOrdersForSum = await PocketBaseService.getOrders({\n        page: 1,\n        perPage: 100, // Reduced from 200 to 100\n        sort: '-updated',\n        filter: filterString\n      });\n      \n      const approvedOrders = allOrdersForSum.items.filter(order => order.approved);\n      const sum = approvedOrders.reduce((total, order) => total + (order.final_price || 0), 0);\n      \n      // Cache the result for 10 minutes\n      sumsCache.set(cacheKey, sum, 10 * 60 * 1000);\n      setTotalSum(sum);\n    } catch {\n      setTotalSum(0);\n    }\n  }, [sumsCache]);\n\n  // Function to check if media alert should be shown\n  const shouldShowMediaAlert = (order: Order): boolean => {\n    if (!order.approved || order.media_received) {\n      return false;\n    }\n\n    try {\n      const fromDate = new Date(order.from);\n      const today = new Date();\n      const timeDiff = fromDate.getTime() - today.getTime();\n      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n      \n      // Show alert if: 2 days or less remaining, OR deadline has passed, OR today\n      return daysDiff <= 2;\n    } catch {\n      return false;\n    }\n  };\n\n  // Function to toggle invoice sent status\n  const handleToggleInvoiceSent = async (order: Order) => {\n    try {\n      const updatedOrder = { ...order, invoice_sent: !order.invoice_sent };\n      await PocketBaseService.updateOrder(order.id, updatedOrder);\n      \n      // Update local state\n      setOrders(prev => prev.map(o => \n        o.id === order.id ? { ...o, invoice_sent: !o.invoice_sent } : o\n      ));\n    } catch (error) {\n      console.error('Error updating invoice status:', error);\n    }\n  };\n\n\n\n  const getMockOrders = (): Order[] => [\n    {\n      id: '1',\n      client: 'Ansamblis LIETUVA',\n      agency: 'PUBLICIS GROUPE',\n      invoice_id: '3481',\n      approved: true,\n      viaduct: false,\n      from: '2025-08-25',\n      to: '2025-09-07',\n      media_received: true,\n      final_price: 1150.64,\n      invoice_sent: false,\n      updated: '2025-08-22T13:37:44Z'\n    },\n    {\n      id: '2',\n      client: 'Perlas momentinƒós 08 25-08 31',\n      agency: 'Open',\n      invoice_id: '3545',\n      approved: true,\n      viaduct: false,\n      from: '2025-08-25',\n      to: '2025-08-31',\n      media_received: true,\n      final_price: 5618.25,\n      invoice_sent: false,\n      updated: '2025-08-22T13:34:37Z'\n    },\n    {\n      id: '3',\n      client: 'CCC back to school',\n      agency: 'OMG',\n      invoice_id: '3546',\n      approved: false,\n      viaduct: true,\n      from: '2025-09-08',\n      to: '2025-09-14',\n      media_received: false,\n      final_price: 282.33,\n      invoice_sent: false,\n      updated: '2025-08-22T13:23:39Z'\n    },\n    {\n      id: '4',\n      client: 'Maxima',\n      agency: 'DDB',\n      invoice_id: '3547',\n      approved: true,\n      viaduct: false,\n      from: '2025-09-01',\n      to: '2025-09-15',\n      media_received: true,\n      final_price: 1250.00,\n      invoice_sent: true,\n      updated: '2025-08-22T14:00:00Z'\n    },\n    {\n      id: '5',\n      client: 'Lidl',\n      agency: 'McCann',\n      invoice_id: '3548',\n      approved: false,\n      viaduct: true,\n      from: '2025-09-10',\n      to: '2025-09-20',\n      media_received: false,\n      final_price: 890.50,\n      invoice_sent: false,\n      updated: '2025-08-22T14:30:00Z'\n    }\n  ];\n\n  const filterMockOrders = useCallback((orders: Order[]): Order[] => {\n    let filtered = [...orders];\n    \n    // Search query filter\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(order => \n        order.client.toLowerCase().includes(query) ||\n        order.agency.toLowerCase().includes(query) ||\n        order.invoice_id.toLowerCase().includes(query)\n      );\n    }\n    \n    // Status filter\n    if (filters.status) {\n      if (filters.status === 'taip') {\n        filtered = filtered.filter(order => order.approved === true);\n      } else if (filters.status === 'ne') {\n        filtered = filtered.filter(order => order.approved === false);\n      }\n    }\n    \n    // Client filter\n    if (filters.client) {\n      filtered = filtered.filter(order => \n        order.client.toLowerCase().includes(filters.client.toLowerCase())\n      );\n    }\n    \n    // Agency filter\n    if (filters.agency) {\n      filtered = filtered.filter(order => \n        order.agency.toLowerCase().includes(filters.agency.toLowerCase())\n      );\n    }\n\n    // Media received filter\n    if (filters.media_received) {\n      if (filters.media_received === 'true') {\n        filtered = filtered.filter(order => order.media_received === true);\n      } else if (filters.media_received === 'false') {\n        filtered = filtered.filter(order => order.media_received === false);\n      }\n    }\n    \n    // Month and year filter\n    if (filters.month && filters.year) {\n      filtered = filtered.filter(order => {\n        const orderDate = new Date(order.from);\n        const orderMonth = orderDate.getMonth() + 1;\n        const orderYear = orderDate.getFullYear();\n        return orderMonth === parseInt(filters.month) && orderYear === parseInt(filters.year);\n      });\n    }\n    \n    return filtered;\n  }, [searchQuery, filters]);\n\n  const sortOrders = useCallback((orders: Order[]): Order[] => {\n    return [...orders].sort((a, b) => {\n      let aValue: string | number | Date;\n      let bValue: string | number | Date;\n      \n      switch (sortField) {\n        case 'client':\n        case 'agency':\n        case 'invoice_id':\n          aValue = (a[sortField as keyof Order] as string)?.toLowerCase() || '';\n          bValue = (b[sortField as keyof Order] as string)?.toLowerCase() || '';\n          break;\n        case 'final_price':\n          aValue = Number(a.final_price) || 0;\n          bValue = Number(b.final_price) || 0;\n          break;\n        case 'from':\n        case 'to':\n        case 'updated':\n          aValue = new Date(a[sortField as keyof Order] as string);\n          bValue = new Date(b[sortField as keyof Order] as string);\n          break;\n        case 'approved':\n          aValue = a.approved ? 1 : 0;\n          bValue = b.approved ? 1 : 0;\n          break;\n        case 'media_received':\n          aValue = a.media_received ? 1 : 0;\n          bValue = b.media_received ? 1 : 0;\n          break;\n        default:\n          aValue = a[sortField as keyof Order] as string;\n          bValue = b[sortField as keyof Order] as string;\n      }\n      \n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [sortField, sortDirection]);\n\n  const buildFilterString = useCallback(() => {\n    const filtersArray = [];\n    \n    console.log('üîç Building filter string with:', { searchQuery, filters });\n    \n    // Add search query filter\n    if (searchQuery.trim()) {\n      // Check if searching for \"viad\" to include viaduct orders\n      if (searchQuery.toLowerCase().startsWith('viad')) {\n        filtersArray.push(`(client~\"${searchQuery}\" || agency~\"${searchQuery}\" || invoice_id~\"${searchQuery}\" || viaduct=true)`);\n        console.log('üîç Added viaduct filter for \"viad\" search');\n        console.log('üîç Search query starts with \"viad\", adding viaduct=true filter');\n      } else {\n        filtersArray.push(`(client~\"${searchQuery}\" || agency~\"${searchQuery}\" || invoice_id~\"${searchQuery}\")`);\n        console.log('üîç Regular search filter added');\n      }\n      console.log('üîç Search query:', searchQuery);\n    }\n    \n    // Status filter - handle boolean conversion\n    if (filters.status) {\n      if (filters.status === 'taip') {\n        filtersArray.push(`approved=true`);\n        console.log('üîç Added status filter: approved=true');\n      } else if (filters.status === 'ne') {\n        filtersArray.push(`approved=false`);\n        console.log('üîç Added status filter: approved=false');\n      }\n    }\n    \n    // Client filter\n    if (filters.client.trim()) {\n      filtersArray.push(`client~\"${filters.client}\"`);\n      console.log('üîç Added client filter:', filters.client);\n    }\n    \n    // Agency filter\n    if (filters.agency.trim()) {\n      filtersArray.push(`agency~\"${filters.agency}\"`);\n      console.log('üîç Added agency filter:', filters.agency);\n    }\n    \n    // Media received filter\n    if (filters.media_received) {\n      if (filters.media_received === 'true') {\n        filtersArray.push(`media_received=true`);\n        console.log('üîç Added media filter: media_received=true');\n      } else if (filters.media_received === 'false') {\n        filtersArray.push(`media_received=false`);\n        console.log('üîç Added media filter: media_received=false');\n      }\n    }\n    \n              // Date filters - show orders that overlap with the selected month\n          if (filters.month && filters.year) {\n            const startDate = `${filters.year}-${filters.month.padStart(2, '0')}-01`;\n            const endDate = `${filters.year}-${filters.month.padStart(2, '0')}-31`;\n            // Show orders that overlap with the selected month:\n            // - order starts before month ends AND order ends after month starts\n            filtersArray.push(`(from<=\"${endDate}\" && to>=\"${startDate}\")`);\n            console.log('üîç Added date filter:', { startDate, endDate, month: filters.month, year: filters.year });\n          }\n    \n    // If no filters, return empty string\n    if (filtersArray.length === 0) {\n      console.log('üîç No filters applied, returning empty string');\n      return '';\n    }\n    \n    const result = filtersArray.join(' && ');\n    console.log('üîç Final filter string:', result);\n    return result;\n  }, [searchQuery, filters]);\n\n  const handleSort = (field: string) => {\n    if (sortField === field) {\n      setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const getSortIcon = (field: string) => {\n    if (sortField !== field) {\n      return (\n        <svg className=\"w-3 h-3 text-gray-300 dark:text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 9l4-4 4 4m0 6l-4 4-4-4\" />\n        </svg>\n      );\n    }\n    \n    if (sortDirection === 'asc') {\n      return (\n        <svg className=\"w-3 h-3 text-blue-500 dark:text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 9l4-4 4 4\" />\n        </svg>\n      );\n    }\n    \n    return (\n      <svg className=\"w-3 h-3 text-blue-500 dark:text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 15l4 4 4-4\" />\n      </svg>\n    );\n  };\n\n  const getStatusText = (approved: boolean) => {\n    return approved ? 'Patvirtinta' : 'Nepatvirtinta';\n  };\n\n  const getStatusColor = (approved: boolean) => {\n    if (approved) return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\n    return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      return format(new Date(dateString), 'yyyy-MM-dd');\n    } catch {\n      return dateString;\n    }\n  };\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('lt-LT', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  };\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      try {\n        setLoading(true);\n        const filterString = buildFilterString();\n        console.log('üîç PocketBase filter string:', filterString);\n        console.log('üîç Current filters:', filters);\n        console.log('üîç Search query:', searchQuery);\n        console.log('üîç Sort field:', sortField, 'direction:', sortDirection);\n        \n        const result = await PocketBaseService.getOrders({\n          page: currentPage,\n          perPage: 20,\n          sort: `${sortDirection === 'desc' ? '-' : ''}${sortField}`,\n          filter: filterString\n        });\n        \n        console.log('‚úÖ PocketBase response:', result);\n        console.log('üîç Filter string sent to PocketBase:', filterString);\n        console.log('üîç Current filters:', filters);\n        console.log('üîç Search query:', searchQuery);\n        \n        // Debug: check if GO3 - Viadukai is in response\n        const go3Order = result.items.find(order => \n          order.client.includes('GO3') || order.client.includes('Viadukai')\n        );\n        if (go3Order) {\n                  console.log('üîç Found GO3 - Viadukai order:', go3Order);\n        console.log('üîç Order dates:', { from: go3Order.from, to: go3Order.to });\n        console.log('üîç Order approved:', go3Order.approved);\n        console.log('üîç Order viaduct:', go3Order.viaduct);\n        \n        // Log all orders to see which ones have viaduct=true\n        console.log('üîç All orders from PocketBase:', result.items);\n        console.log('üîç Orders with viaduct=true:', result.items.filter(order => order.viaduct));\n        } else {\n          console.log('‚ùå GO3 - Viadukai order not found in response');\n        }\n        \n        // Debug: Log all orders to see what we have\n        console.log('üîç All orders from PocketBase:', result.items);\n        console.log('üîç Orders with viaduct=true:', result.items.filter(order => order.viaduct));\n        console.log('üîç Orders with viaduct=false:', result.items.filter(order => !order.viaduct));\n        setOrders(result.items);\n        setTotalPages(result.totalPages);\n        setTotalItems(result.totalItems);\n        \n        // Calculate sum asynchronously in background (non-blocking)\n        calculateSumAsync(filterString);\n      } catch (error) {\n        console.error('‚ùå Failed to fetch orders:', error);\n        // For demo purposes, show filtered and sorted mock data\n        const mockOrders = getMockOrders();\n        const filteredOrders = filterMockOrders(mockOrders);\n        const sortedOrders = sortOrders(filteredOrders);\n        setOrders(sortedOrders);\n        setTotalPages(1);\n        setTotalItems(sortedOrders.length);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchOrders();\n  }, [currentPage, searchQuery, filters, sortField, sortDirection, buildFilterString, filterMockOrders, sortOrders]);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8\">\n        <div className=\"flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-2 text-gray-600 dark:text-gray-400\">Kraunama...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\">\n      {/* Table Header */}\n      <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              U≈æsakymai ({totalItems})\n              {totalSum > 0 && (\n                <span className=\"ml-2 text-sm font-normal text-green-600 dark:text-green-400\">\n                  - Suma: ‚Ç¨{totalSum.toLocaleString('lt-LT', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                </span>\n              )}\n            </h2>\n            {sortField && (\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                R≈´≈°iuojama pagal: <span className=\"font-medium\">{sortField}</span> \n                ({sortDirection === 'asc' ? 'didƒójimo' : 'ma≈æƒójimo'} tvarka)\n              </p>\n            )}\n          </div>\n          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Puslapis {currentPage} i≈° {totalPages}\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('client')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Klientas</span>\n                  {getSortIcon('client')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('agency')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Agent≈´ra</span>\n                  {getSortIcon('agency')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('invoice_id')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>U≈æsakymo Nr.</span>\n                  {getSortIcon('invoice_id')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('approved')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Statusas</span>\n                  {getSortIcon('approved')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('from')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Data nuo</span>\n                  {getSortIcon('from')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('to')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Data iki</span>\n                  {getSortIcon('to')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('media_received')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Media gautas</span>\n                  {getSortIcon('media_received')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('final_price')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>Kaina</span>\n                  {getSortIcon('final_price')}\n                </div>\n              </th>\n              <th \n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                onClick={() => handleSort('invoice_sent')}\n              >\n                <div className=\"flex items-center space-x-1\">\n                  <span>SƒÖskaita</span>\n                  {getSortIcon('invoice_sent')}\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {orders.map((order) => (\n              <tr \n                key={order.id} \n                className=\"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors\"\n                onClick={() => onEditOrder(order)}\n              >\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div>\n                    {order.viaduct && (\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">\n                        Viadukai\n                      </div>\n                    )}\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      {order.client}\n                      {shouldShowMediaAlert(order) && (\n                        <span className=\"ml-2 text-red-600 animate-pulse\">\n                          ‚ö†Ô∏è\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {order.agency || '-'}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-white\">\n                    {order.invoice_id}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(order.approved)}`}>\n                    {getStatusText(order.approved)}\n                  </span>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-white\">\n                    {formatDate(order.from)}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900 dark:text-white\">\n                    {formatDate(order.to)}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    order.media_received \n                      ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                      : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n                  }`}>\n                    {order.media_received ? 'Taip' : 'Ne'}\n                  </span>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                    {formatPrice(order.final_price)}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleToggleInvoiceSent(order);\n                    }}\n                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${\n                      order.invoice_sent ? 'bg-green-300' : 'bg-gray-200'\n                    }`}\n                  >\n                    <span\n                      className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                        order.invoice_sent ? 'translate-x-6' : 'translate-x-1'\n                      }`}\n                    />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"px-6 py-4 border-t border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm text-gray-700 dark:text-gray-300\">\n              Rodoma {((currentPage - 1) * 20) + 1} - {Math.min(currentPage * 20, totalItems)} i≈° {totalItems} rezultat≈≥\n            </div>\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n                disabled={currentPage === 1}\n                className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Ankstesnis\n              </button>\n              <button\n                onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n                disabled={currentPage === totalPages}\n                className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Sekantis\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1438, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/Header.tsx"],"sourcesContent":["'use client';\n\n\nimport { SunIcon, MoonIcon, CalendarIcon } from '@heroicons/react/24/outline';\n\ninterface HeaderProps {\n  onAddOrder: () => void;\n  isDarkMode: boolean;\n  onToggleDarkMode: () => void;\n  onShowWeekNumbers: () => void;\n}\n\nexport function Header({ onAddOrder, isDarkMode, onToggleDarkMode }: HeaderProps) {\n\n  return (\n    <header className=\"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          {/* Logo and Title */}\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-xl\">P</span>\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  Piksel Orders\n                </h1>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  U≈æsakym≈≥ valdymas\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center space-x-4\">\n            {/* Dark Mode Toggle */}\n            <button\n              onClick={onToggleDarkMode}\n              className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n            >\n              {isDarkMode ? (\n                <SunIcon className=\"w-5 h-5\" />\n              ) : (\n                <MoonIcon className=\"w-5 h-5\" />\n              )}\n            </button>\n\n            {/* Week Numbers Button */}\n            <button\n              onClick={onShowWeekNumbers}\n              className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white font-medium rounded-lg hover:from-green-700 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl\"\n            >\n              <CalendarIcon className=\"w-5 h-5 mr-2\" />\n              Savaiƒçi≈≥ numeriai\n            </button>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAHA;;;AAYO,SAAS,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,gBAAgB,EAAe;IAE9E,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;;;;;;8CAEjD,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAAkD;;;;;;sDAGhE,8OAAC;4CAAE,WAAU;sDAA2C;;;;;;;;;;;;;;;;;;;;;;;kCAQ9D,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAET,2BACC,8OAAC,wNAAO;oCAAC,WAAU;;;;;yDAEnB,8OAAC,2NAAQ;oCAAC,WAAU;;;;;;;;;;;0CAKxB,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,uOAAY;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQvD","debugId":null}},
    {"offset": {"line": 1581, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/SearchAndFilters.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { MagnifyingGlassIcon, FunnelIcon } from '@heroicons/react/24/outline';\n\ninterface SearchAndFiltersProps {\n  searchQuery: string;\n  onSearchChange: (query: string) => void;\n  filters: {\n    status: string;\n    month: string;\n    year: string;\n    client: string;\n    agency: string;\n    media_received: string;\n    invoice_sent: string;\n  };\n  onFiltersChange: (filters: {\n    status: string;\n    month: string;\n    year: string;\n    client: string;\n    agency: string;\n    media_received: string;\n    invoice_sent: string;\n  }) => void;\n}\n\nexport function SearchAndFilters({\n  searchQuery,\n  onSearchChange,\n  filters,\n  onFiltersChange\n}: SearchAndFiltersProps) {\n  const months = [\n    { value: '', label: 'Visi mƒónesiai' },\n    { value: '01', label: 'Sausis' },\n    { value: '02', label: 'Vasaris' },\n    { value: '03', label: 'Kovas' },\n    { value: '04', label: 'Balandis' },\n    { value: '05', label: 'Gegu≈æƒó' },\n    { value: '06', label: 'Bir≈æelis' },\n    { value: '07', label: 'Liepa' },\n    { value: '08', label: 'Rugpj≈´tis' },\n    { value: '09', label: 'Rugsƒójis' },\n    { value: '10', label: 'Spalis' },\n    { value: '11', label: 'Lapkritis' },\n    { value: '12', label: 'Gruodis' }\n  ];\n\n  const years = Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - 2 + i);\n  const currentYear = new Date().getFullYear();\n\n  const statuses = [\n    { value: '', label: 'Visi statusai' },\n    { value: 'taip', label: 'Patvirtinta' },\n    { value: 'ne', label: 'Nepatvirtinta' },\n    { value: 'rezervuota', label: 'Rezervuota' },\n    { value: 'at≈°aukta', label: 'At≈°aukta' }\n  ];\n\n  const mediaReceivedOptions = [\n    { value: '', label: 'Visi media' },\n    { value: 'true', label: 'Media gautas' },\n    { value: 'false', label: 'Media negautas' }\n  ];\n\n\n\n  const handleFilterChange = (key: string, value: string) => {\n    onFiltersChange({ ...filters, [key]: value });\n  };\n\n  // Set default filters when component mounts\n  React.useEffect(() => {\n    // Force set default filters on first load\n    onFiltersChange({\n      status: '', // Visi statusai\n      month: '', // Visi mƒónesiai\n      year: currentYear.toString(), // 2025 metai\n      client: '',\n      agency: '',\n      media_received: '',\n      invoice_sent: ''\n    });\n  }, []);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Search */}\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Paie≈°ka\n          </label>\n          <div className=\"relative\">\n            <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Ie≈°koti pagal klientƒÖ, agent≈´rƒÖ, u≈æsakymo Nr...\"\n              value={searchQuery}\n              onChange={(e) => onSearchChange(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n            />\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Filtrai\n          </label>\n          {/* Active filters info */}\n          {(filters.status || filters.month || filters.client || filters.agency) && (\n            <div className=\"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-md\">\n              ‚ÑπÔ∏è Aktyv≈´s filtrai: {filters.status ? `${statuses.find(s => s.value === filters.status)?.label}, ` : ''}{filters.month ? `${months.find(m => m.value === filters.month)?.label}, ` : ''}{filters.client ? `Klientas: ${filters.client}, ` : ''}{filters.agency ? `Agent≈´ra: ${filters.agency}` : ''}\n            </div>\n          )}\n          \n          {/* Default filters info */}\n          {filters.status === '' && filters.month === '' && filters.year === currentYear.toString() && (\n            <div className=\"text-xs text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-md\">\n              üéØ By default: Visi statusai, Visi mƒónesiai, 2025 metai\n            </div>\n          )}\n          <div className=\"grid grid-cols-3 gap-3\">\n            <select\n              value={filters.status}\n              onChange={(e) => handleFilterChange('status', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              {statuses.map((status) => (\n                <option key={status.value} value={status.value}>\n                  {status.label}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={filters.month}\n              onChange={(e) => handleFilterChange('month', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              {months.map((month) => (\n                <option key={month.value} value={month.value}>\n                  {month.label}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={filters.year}\n              onChange={(e) => handleFilterChange('year', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              {years.map((year) => (\n                <option key={year} value={year.toString()}>\n                  {year}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={filters.media_received}\n              onChange={(e) => handleFilterChange('media_received', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              {mediaReceivedOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n\n            <input\n              type=\"text\"\n              placeholder=\"Klientas\"\n              value={filters.client}\n              onChange={(e) => handleFilterChange('client', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            />\n\n            <input\n              type=\"text\"\n              placeholder=\"Agent≈´ra\"\n              value={filters.agency}\n              onChange={(e) => handleFilterChange('agency', e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Active Filters Display */}\n      {(filters.status || filters.month || filters.year || filters.client || filters.agency) && (\n        <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\n          <div className=\"flex items-center space-x-2\">\n            <FunnelIcon className=\"w-4 h-4 text-gray-500\" />\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">Aktyv≈´s filtrai:</span>\n            <div className=\"flex flex-wrap gap-2\">\n              {filters.status && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\n                  Statusas: {statuses.find(s => s.value === filters.status)?.label}\n                  <button\n                    onClick={() => handleFilterChange('status', '')}\n                    className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n              {filters.month && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\n                  Mƒónuo: {months.find(m => m.value === filters.month)?.label}\n                  <button\n                    onClick={() => handleFilterChange('month', '')}\n                    className=\"ml-1 text-green-600 hover:text-green-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n              {filters.year && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200\">\n                  Metai: {filters.year}\n                  <button\n                    onClick={() => handleFilterChange('year', '')}\n                    className=\"ml-1 text-purple-600 hover:text-purple-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n              {filters.client && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\">\n                  Klientas: {filters.client}\n                  <button\n                    onClick={() => handleFilterChange('client', '')}\n                    className=\"ml-1 text-orange-600 hover:text-orange-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n              {filters.agency && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200\">\n                  Agent≈´ra: {filters.agency}\n                  <button\n                    onClick={() => handleFilterChange('agency', '')}\n                    className=\"ml-1 text-indigo-600 hover:text-indigo-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n              {filters.media_received && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200\">\n                  Media: {mediaReceivedOptions.find(o => o.value === filters.media_received)?.label}\n                  <button\n                    onClick={() => handleFilterChange('media_received', '')}\n                    className=\"ml-1 text-teal-600 hover:text-teal-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/AddOrderModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { OrderFormData } from '@/types';\n\ninterface AddOrderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function AddOrderModal({ isOpen, onClose }: AddOrderModalProps) {\n  const [formData, setFormData] = useState<OrderFormData>({\n    client: '',\n    agency: '',\n    invoice_id: '',\n    approved: 'ne',\n    viaduct: false,\n    from: '',\n    to: '',\n    media_received: false,\n    final_price: 0,\n    invoice_sent: false\n  });\n\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      // TODO: Implement PocketBase integration\n      console.log('Submitting order:', formData);\n      \n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Reset form and close modal\n      setFormData({\n        client: '',\n        agency: '',\n        invoice_id: '',\n        approved: 'ne',\n        viaduct: false,\n        from: '',\n        to: '',\n        media_received: false,\n        final_price: 0,\n        invoice_sent: false\n      });\n      \n      onClose();\n    } catch (error) {\n      console.error('Failed to create order:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (field: keyof OrderFormData, value: string | number | boolean) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      \n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n        <Dialog.Panel className=\"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-2xl\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n            <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n              Pridƒóti naujƒÖ u≈æsakymƒÖ\n            </Dialog.Title>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Client */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Klientas *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.client}\n                  onChange={(e) => handleInputChange('client', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"ƒÆveskite kliento pavadinimƒÖ\"\n                />\n              </div>\n\n              {/* Agency */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Agent≈´ra\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.agency}\n                  onChange={(e) => handleInputChange('agency', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"ƒÆveskite agent≈´ros pavadinimƒÖ\"\n                />\n              </div>\n\n              {/* Invoice ID */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  U≈æsakymo Nr. *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.invoice_id}\n                  onChange={(e) => handleInputChange('invoice_id', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"ƒÆveskite u≈æsakymo numerƒØ\"\n                />\n              </div>\n\n              {/* Status */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Statusas *\n                </label>\n                <select\n                  required\n                  value={formData.approved}\n                  onChange={(e) => handleInputChange('approved', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"ne\">Nepatvirtinta</option>\n                  <option value=\"taip\">Patvirtinta</option>\n                  <option value=\"rezervuota\">Rezervuota</option>\n                  <option value=\"at≈°aukta\">At≈°aukta</option>\n                </select>\n              </div>\n\n              {/* Date From */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Data nuo *\n                </label>\n                <input\n                  type=\"date\"\n                  required\n                  value={formData.from}\n                  onChange={(e) => handleInputChange('from', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n\n              {/* Date To */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Data iki *\n                </label>\n                <input\n                  type=\"date\"\n                  required\n                  value={formData.to}\n                  onChange={(e) => handleInputChange('to', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n\n              {/* Final Price */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Galutinƒó kaina *\n                </label>\n                <input\n                  type=\"number\"\n                  required\n                  step=\"0.01\"\n                  min=\"0\"\n                  value={formData.final_price}\n                  onChange={(e) => handleInputChange('final_price', parseFloat(e.target.value) || 0)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n            </div>\n\n            {/* Checkboxes */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <label className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.viaduct}\n                  onChange={(e) => handleInputChange('viaduct', e.target.checked)}\n                  className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n                />\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">Viadukas</span>\n              </label>\n\n              <label className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.media_received}\n                  onChange={(e) => handleInputChange('media_received', e.target.checked)}\n                  className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n                />\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">Medija gauta</span>\n              </label>\n\n              <label className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.invoice_sent}\n                  onChange={(e) => handleInputChange('invoice_sent', e.target.checked)}\n                  className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\n                />\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">SƒÖskaita i≈°si≈≥sta</span>\n              </label>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                At≈°aukti\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Kuriama...' : 'Sukurti u≈æsakymƒÖ'}\n              </button>\n            </div>\n          </form>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2606, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\nimport { config } from '@/config';\n\nconst supabaseUrl = config.supabase.url;\nconst supabaseAnonKey = config.supabase.anonKey;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,cAAc,gIAAM,CAAC,QAAQ,CAAC,GAAG;AACvC,MAAM,kBAAkB,gIAAM,CAAC,QAAQ,CAAC,OAAO;AAE/C,IAAI,CAAC,eAAe,CAAC,iBAAiB;IACpC,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 2624, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/lib/supabase-service.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { Comment, Reminder, FileAttachment } from '@/types';\n\nexport class SupabaseService {\n  // Comments\n  static async getComments(orderId: string): Promise<Comment[]> {\n    const { data, error } = await supabase\n      .from('comments')\n      .select('*')\n      .eq('order_id', orderId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    \n    // Load printscreens for this order\n    const printscreens = await this.getPrintscreensForOrder(orderId);\n    \n    // Add printscreens to all comments (simple approach)\n    const commentsWithPrintscreens = (data || []).map(comment => ({\n      ...comment,\n      printscreens: printscreens\n    }));\n    \n    return commentsWithPrintscreens;\n  }\n\n  static async getPrintscreensForOrder(orderId: string): Promise<FileAttachment[]> {\n    try {\n      const { data, error } = await supabase\n        .from('file_attachments')\n        .select('*')\n        .eq('order_id', orderId)\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        console.error('‚ùå Failed to load printscreens:', error);\n        return [];\n      }\n      \n      // Filter printscreens on client side\n      const printscreens = (data || []).filter(file => \n        file.file_type && file.file_type.startsWith('image/')\n      );\n      \n\n      return printscreens;\n      \n    } catch (error) {\n      console.error('‚ùå Error loading printscreens:', error);\n      return [];\n    }\n  }\n\n  static async addComment(comment: Omit<Comment, 'id' | 'created_at' | 'updated_at'>): Promise<Comment> {\n    const { data, error } = await supabase\n      .from('comments')\n      .insert([{ \n        ...comment,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      }])\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  }\n\n  static async updateComment(id: string, text: string): Promise<Comment> {\n    const { data, error } = await supabase\n      .from('comments')\n      .update({ text, updated_at: new Date().toISOString() })\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  }\n\n  static async deleteComment(id: string): Promise<void> {\n    const { error } = await supabase\n      .from('comments')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n  }\n\n  // Reminders\n  static async getReminders(orderId: string): Promise<Reminder[]> {\n    const { data, error } = await supabase\n      .from('reminders')\n      .select('*')\n      .eq('order_id', orderId)\n      .order('due_date', { ascending: true });\n\n    if (error) throw error;\n    return data || [];\n  }\n\n  static async addReminder(orderId: string, reminder: Omit<Reminder, 'id' | 'order_id' | 'created_at'>): Promise<Reminder> {\n    const { data, error } = await supabase\n      .from('reminders')\n      .insert([{ \n        order_id: orderId, \n        ...reminder,\n        created_at: new Date().toISOString()\n      }])\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  }\n\n  static async updateReminder(id: string, updates: Partial<Reminder>): Promise<Reminder> {\n    const { data, error } = await supabase\n      .from('reminders')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  }\n\n  static async deleteReminder(id: string): Promise<void> {\n    const { error } = await supabase\n      .from('reminders')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n  }\n\n  // File Attachments\n  static async getFiles(orderId: string): Promise<FileAttachment[]> {\n    const { data, error } = await supabase\n      .from('file_attachments')\n      .select('*')\n      .eq('order_id', orderId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  }\n\n  static async uploadFileToStorage(orderId: string, file: File): Promise<FileAttachment> {\n    console.log('üîç Starting file upload to Storage...');\n    \n    try {\n      // 1. ƒÆkelti failƒÖ ƒØ Supabase Storage\n      const fileName = `${Date.now()}_${file.name}`;\n      const storagePath = `${orderId}/${fileName}`;\n      \n      console.log('üì§ Uploading to Storage:', storagePath);\n      \n      const { error: uploadError } = await supabase.storage\n        .from('files')\n        .upload(storagePath, file);\n      \n      if (uploadError) {\n        console.error('‚ùå Storage upload failed:', uploadError);\n        throw uploadError;\n      }\n      \n      // 2. Gauti public URL\n      const { data: urlData } = supabase.storage\n        .from('files')\n        .getPublicUrl(storagePath);\n      \n      if (!urlData.publicUrl) {\n        throw new Error('Failed to get public URL');\n      }\n      \n      // 3. I≈°saugoti metaduomenis ƒØ DB (tik plok≈°ƒçias objektas)\n      const metadata = {\n        order_id: orderId,\n        filename: file.name,\n        file_url: urlData.publicUrl,\n        file_type: file.type || 'application/octet-stream',\n        created_at: new Date().toISOString()\n      };\n      \n      console.log('üì§ Saving metadata to DB:', metadata);\n      \n      const { data: fileData, error: insertError } = await supabase\n        .from('file_attachments')\n        .insert([metadata])\n        .select()\n        .single();\n      \n      if (insertError) {\n        console.error('‚ùå Failed to save metadata:', insertError);\n        throw insertError;\n      }\n      \n      console.log('‚úÖ File uploaded successfully:', file.name);\n      \n      return {\n        id: fileData.id,\n        order_id: orderId,\n        filename: file.name,\n        file_url: urlData.publicUrl,\n        file_type: file.type || 'application/octet-stream',\n        created_at: fileData.created_at\n      };\n      \n    } catch (error) {\n      console.error('‚ùå Upload failed:', error);\n      throw error;\n    }\n  }\n\n  static async uploadPrintscreen(orderId: string, file: File): Promise<FileAttachment> {\n    try {\n      // 1. ƒÆkelti printscreen ƒØ Supabase Storage\n      const fileName = `printscreen_${Date.now()}_${file.name}`;\n      const storagePath = `${orderId}/printscreens/${fileName}`;\n      \n      const { error: uploadError } = await supabase.storage\n        .from('files')\n        .upload(storagePath, file);\n      \n      if (uploadError) {\n        throw uploadError;\n      }\n      \n      // 2. Gauti public URL\n      const { data: urlData } = supabase.storage\n        .from('files')\n        .getPublicUrl(storagePath);\n      \n      if (!urlData.publicUrl) {\n        throw new Error('Failed to get public URL');\n      }\n      \n      // 3. I≈°saugoti printscreen metaduomenis ƒØ DB\n      const metadata = {\n        order_id: orderId,\n        filename: file.name,\n        file_url: urlData.publicUrl,\n        file_type: file.type || 'image/png',\n        created_at: new Date().toISOString()\n      };\n      \n      const { data: fileData, error: insertError } = await supabase\n        .from('file_attachments')\n        .insert([metadata])\n        .select()\n        .single();\n      \n      if (insertError) {\n        throw insertError;\n      }\n      \n      return {\n        id: fileData.id,\n        order_id: orderId,\n        filename: file.name,\n        file_url: urlData.publicUrl,\n        file_type: file.type || 'image/png',\n        created_at: fileData.created_at\n      };\n      \n    } catch (error) {\n      console.error('Printscreen upload failed:', error);\n      throw error;\n    }\n  }\n\n  static async deleteFile(id: string): Promise<void> {\n    const { data: file, error: fetchError } = await supabase\n      .from('file_attachments')\n      .select('file_url')\n      .eq('id', id)\n      .single();\n\n    if (fetchError) throw fetchError;\n\n    // Extract file path from URL - get everything after the bucket name\n    const url = new URL(file.file_url);\n    const pathParts = url.pathname.split('/');\n    const bucketIndex = pathParts.findIndex(part => part === 'files');\n    const filePath = pathParts.slice(bucketIndex + 1).join('/');\n    \n    const { error: deleteError } = await supabase.storage\n      .from('files')\n      .remove([filePath]);\n\n    if (deleteError) {\n      throw deleteError;\n    }\n\n    const { error: dbError } = await supabase\n      .from('file_attachments')\n      .delete()\n      .eq('id', id);\n\n    if (dbError) {\n      throw dbError;\n    }\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2834, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/OrderDetailsModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ChatBubbleLeftIcon, BellIcon, PaperClipIcon } from '@heroicons/react/24/outline';\nimport { Order, Comment, Reminder, FileAttachment } from '@/types';\nimport { SupabaseService } from '@/lib/supabase-service';\n\nimport { format } from 'date-fns';\n\ninterface OrderDetailsModalProps {\n  order: Order | null;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function OrderDetailsModal({ order, isOpen, onClose }: OrderDetailsModalProps) {\n  const [activeTab, setActiveTab] = useState<'details' | 'comments' | 'reminders' | 'files'>('details');\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [reminders, setReminders] = useState<Reminder[]>([]);\n  const [files, setFiles] = useState<FileAttachment[]>([]);\n\n  const [newComment, setNewComment] = useState('');\n  const [newReminder, setNewReminder] = useState({ title: '', due_date: '', is_completed: false });\n\n  useEffect(() => {\n    const loadOrderData = async () => {\n      if (!order) return;\n      \n      try {\n        const [commentsData, remindersData, filesData] = await Promise.all([\n          SupabaseService.getComments(order.id),\n          SupabaseService.getReminders(order.id),\n          SupabaseService.getFiles(order.id)\n        ]);\n        \n        setComments(commentsData);\n        setReminders(remindersData);\n        setFiles(filesData);\n      } catch (error) {\n        console.error('Failed to load order data:', error);\n      }\n    };\n\n    if (order && isOpen) {\n      loadOrderData();\n    }\n  }, [order, isOpen]);\n\n  const handleAddComment = async () => {\n    if (!order || !newComment.trim()) return;\n    \n    try {\n      const comment = await SupabaseService.addComment({\n        order_id: order.id,\n        text: newComment\n      });\n      setComments(prev => [comment, ...prev]);\n      setNewComment('');\n    } catch (error) {\n      console.error('Failed to add comment:', error);\n    }\n  };\n\n  const handleAddReminder = async () => {\n    if (!order || !newReminder.title.trim() || !newReminder.due_date) return;\n    \n    try {\n      const reminder = await SupabaseService.addReminder(order.id, {\n        title: newReminder.title,\n        due_date: newReminder.due_date,\n        is_completed: false\n      });\n      setReminders(prev => [...prev, reminder]);\n      setNewReminder({ title: '', due_date: '', is_completed: false });\n    } catch (error) {\n      console.error('Failed to add reminder:', error);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (!order || !event.target.files?.length) return;\n    \n    try {\n      const file = event.target.files[0];\n      const fileAttachment = await SupabaseService.uploadFileToStorage(order.id, file);\n      setFiles(prev => [fileAttachment, ...prev]);\n    } catch (error) {\n      console.error('Failed to upload file:', error);\n    }\n  };\n\n  const getStatusColor = (approved: boolean) => {\n    if (approved) return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\n    return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n  };\n\n  const getStatusText = (approved: boolean) => {\n    return approved ? 'Patvirtinta' : 'Nepatvirtinta';\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      return format(new Date(dateString), 'yyyy-MM-dd');\n    } catch {\n      return dateString;\n    }\n  };\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('lt-LT', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  };\n\n  if (!order) return null;\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      \n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n        <Dialog.Panel className=\"mx-auto max-w-4xl w-full h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl flex flex-col\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n            <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n              U≈æsakymo detalƒós: {order.client}\n            </Dialog.Title>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Tabs */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav className=\"flex space-x-8 px-6\">\n              {[\n                { id: 'details', label: 'Detalƒós', icon: null },\n                { id: 'comments', label: 'Komentarai', icon: ChatBubbleLeftIcon },\n                { id: 'reminders', label: 'Priminimai', icon: BellIcon },\n                { id: 'files', label: 'Failai', icon: PaperClipIcon }\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as 'details' | 'comments' | 'reminders' | 'files')}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                    activeTab === tab.id\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    {tab.icon && <tab.icon className=\"w-4 h-4\" />}\n                    <span>{tab.label}</span>\n                  </div>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {activeTab === 'details' && (\n              <div className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Pagrindinƒó informacija</h3>\n                    <dl className=\"space-y-3\">\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Klientas</dt>\n                        <dd className=\"text-sm text-gray-900 dark:text-white\">{order.client}</dd>\n                      </div>\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Agent≈´ra</dt>\n                        <dd className=\"text-sm text-gray-900 dark:text-white\">{order.agency || '-'}</dd>\n                      </div>\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">U≈æsakymo Nr.</dt>\n                        <dd className=\"text-sm text-gray-900 dark:text-white\">{order.invoice_id}</dd>\n                      </div>\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Statusas</dt>\n                        <dd>\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(order.approved)}`}>\n                            {getStatusText(order.approved)}\n                          </span>\n                        </dd>\n                      </div>\n                    </dl>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Datos ir kaina</h3>\n                    <dl className=\"space-y-3\">\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Data nuo</dt>\n                        <dd className=\"text-sm text-gray-900 dark:text-white\">{formatDate(order.from)}</dd>\n                      </div>\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Data iki</dt>\n                        <dd className=\"text-sm text-gray-900 dark:text-white\">{formatDate(order.to)}</dd>\n                      </div>\n                      <div>\n                        <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Galutinƒó kaina</dt>\n                        <dd className=\"text-sm font-medium text-gray-900 dark:text-white\">{formatPrice(order.final_price)}</dd>\n                      </div>\n                    </dl>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Papildoma informacija</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={order.viaduct}\n                        readOnly\n                        className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Viadukas</span>\n                    </div>\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={order.media_received}\n                        readOnly\n                        className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Medija gauta</span>\n                    </div>\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={order.invoice_sent}\n                        readOnly\n                        className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">SƒÖskaita i≈°si≈≥sta</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'comments' && (\n              <div className=\"space-y-4\">\n                <div className=\"flex space-x-3\">\n                  <input\n                    type=\"text\"\n                    value={newComment}\n                    onChange={(e) => setNewComment(e.target.value)}\n                    placeholder=\"Pridƒóti komentarƒÖ...\"\n                    className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                  />\n                  <button\n                    onClick={handleAddComment}\n                    disabled={!newComment.trim()}\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Pridƒóti\n                  </button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {comments.map((comment) => (\n                    <div key={comment.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                                                  <p className=\"text-sm text-gray-900 dark:text-white\">{comment.text}</p>\n                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {formatDate(comment.created_at)}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                  {comments.length === 0 && (\n                    <p className=\"text-gray-500 dark:text-gray-400 text-center py-8\">\n                      Komentar≈≥ nƒóra\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'reminders' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">Pridƒóti priminimƒÖ</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                    <input\n                      type=\"text\"\n                      value={newReminder.title}\n                      onChange={(e) => setNewReminder(prev => ({ ...prev, title: e.target.value }))}\n                      placeholder=\"Pavadinimas\"\n                      className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                    />\n\n                    <input\n                      type=\"date\"\n                      value={newReminder.due_date}\n                      onChange={(e) => setNewReminder(prev => ({ ...prev, due_date: e.target.value }))}\n                      className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                    />\n                  </div>\n                  <button\n                    onClick={handleAddReminder}\n                    disabled={!newReminder.title.trim() || !newReminder.due_date}\n                    className=\"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Pridƒóti priminimƒÖ\n                  </button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {reminders.map((reminder) => (\n                    <div key={reminder.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <h5 className=\"font-medium text-gray-900 dark:text-white\">{reminder.title}</h5>\n\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                            Iki: {formatDate(reminder.due_date)}\n                          </p>\n                        </div>\n                        <input\n                          type=\"checkbox\"\n                          checked={reminder.is_completed}\n                          onChange={async (e) => {\n                            try {\n                              await SupabaseService.updateReminder(reminder.id, { is_completed: e.target.checked });\n                              setReminders(prev => prev.map(r => \n                                r.id === reminder.id ? { ...r, is_completed: e.target.checked } : r\n                              ));\n                            } catch (error) {\n                              console.error('Failed to update reminder:', error);\n                            }\n                          }}\n                          className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                        />\n                      </div>\n                    </div>\n                  ))}\n                  {reminders.length === 0 && (\n                    <p className=\"text-gray-500 dark:text-gray-400 text-center py-8\">\n                      Priminim≈≥ nƒóra\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'files' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">Pridƒóti failƒÖ</h4>\n                  <div className=\"flex items-center space-x-3\">\n                    <input\n                      type=\"file\"\n                      onChange={handleFileUpload}\n                      accept=\".jpg,.jpeg,.png,.pdf,.xls,.xlsx\"\n                      className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n                    />\n                    <PaperClipIcon className=\"w-5 h-5 text-gray-400\" />\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {files.map((file) => (\n                    <div key={file.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <PaperClipIcon className=\"w-8 h-8 text-gray-400\" />\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n                            {file.filename}\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            {formatDate(file.created_at)}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"mt-3 flex space-x-2\">\n                        <a\n                          href={file.file_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                        >\n                          Per≈æi≈´rƒóti\n                        </a>\n                        <button\n                          onClick={async () => {\n                            try {\n                              await SupabaseService.deleteFile(file.id);\n                              setFiles(prev => prev.filter(f => f.id !== file.id));\n                            } catch (error) {\n                              console.error('Failed to delete file:', error);\n                            }\n                          }}\n                          className=\"text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                        >\n                          I≈°trinti\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                  {files.length === 0 && (\n                    <p className=\"text-gray-500 dark:text-gray-400 text-center py-8 col-span-full\">\n                      Fail≈≥ nƒóra\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3854, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/EditOrderModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport Image from 'next/image';\nimport { Order, Comment, Reminder, FileAttachment } from '@/types';\nimport { PocketBaseService } from '@/lib/pocketbase';\nimport { SupabaseService } from '@/lib/supabase-service';\n\ninterface EditOrderModalProps {\n  order: Order | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onOrderUpdated: (order: Order) => void;\n}\n\nexport function EditOrderModal({ order, isOpen, onClose, onOrderUpdated }: EditOrderModalProps) {\n  const [formData, setFormData] = useState<Partial<Order>>({});\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [reminders, setReminders] = useState<Reminder[]>([]);\n  const [printScreens, setPrintScreens] = useState<FileAttachment[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [newComment, setNewComment] = useState('');\n  const [reminderDate, setReminderDate] = useState('');\n  const [reminderMessage, setReminderMessage] = useState('');\n  const [pendingPrintscreens, setPendingPrintscreens] = useState<FileAttachment[]>([]);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const [quote, setQuote] = useState<any>(null);\n\n  const loadQuote = async () => {\n    if (!order) return;\n    \n    try {\n      const quoteData = await PocketBaseService.getQuoteByOrderId(order.invoice_id);\n      setQuote(quoteData);\n    } catch (error) {\n      console.log('No quote found for order:', order.invoice_id);\n    }\n  };\n\n  useEffect(() => {\n    if (order) {\n      setFormData({\n        client: order.client,\n        agency: order.agency,\n        invoice_id: order.invoice_id,\n        from: order.from,\n        to: order.to,\n        final_price: order.final_price || 0,\n        approved: order.approved,\n        media_received: order.media_received,\n        invoice_sent: order.invoice_sent,\n        viaduct: order.viaduct,\n      });\n      \n      // Load quote data\n      loadQuote();\n    }\n  }, [order]);\n\n  // Focus modal on open for ESC key to work\n  useEffect(() => {\n    if (isOpen) {\n      const modalElement = document.querySelector('[role=\"dialog\"]') as HTMLElement;\n      if (modalElement) {\n        modalElement.focus();\n      }\n    }\n  }, [isOpen]);\n\n  const loadComments = useCallback(async () => {\n    if (!order) return;\n    try {\n      const commentsData = await SupabaseService.getComments(order.id);\n      // Sort comments by date (newest first)\n      const sortedComments = commentsData.sort((a, b) => \n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n      );\n      setComments(sortedComments);\n    } catch (error) {\n      console.error('Error loading comments:', error);\n    }\n  }, [order]);\n\n  const loadReminders = useCallback(async () => {\n    if (!order) return;\n    try {\n      const remindersData = await SupabaseService.getReminders(order.id);\n      setReminders(remindersData);\n    } catch (error) {\n      console.error('Error loading reminders:', error);\n    }\n  }, [order]);\n\n  const loadPrintScreens = useCallback(async () => {\n    if (!order) return;\n    try {\n      const printScreensData = await SupabaseService.getPrintscreensForOrder(order.id);\n      setPrintScreens(printScreensData);\n      // Clear pending printscreens when loading existing ones\n      setPendingPrintscreens([]);\n    } catch (error) {\n      console.error('Error loading print screens:', error);\n    }\n  }, [order]);\n\n  // Lazy loading - load data only when needed\n  useEffect(() => {\n    if (order && isOpen) {\n      // Load only essential data immediately\n      loadComments();\n      \n      // Load non-essential data with delay to reduce initial load\n      const timer = setTimeout(() => {\n        loadReminders();\n        loadPrintScreens();\n      }, 500); // 500ms delay\n      \n      return () => clearTimeout(timer);\n    }\n  }, [order, isOpen, loadComments, loadReminders, loadPrintScreens]);\n\n  const handleInputChange = (field: keyof Order, value: string | number | boolean) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleSave = async () => {\n    if (!order) return;\n    \n    setLoading(true);\n    try {\n      const updatedOrder = await PocketBaseService.updateOrder(order.id, formData);\n      onOrderUpdated(updatedOrder);\n      onClose();\n    } catch (error) {\n      console.error('Error updating order:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!order) return;\n    \n    if (confirm('Ar tikrai norite i≈°trinti ≈°ƒØ u≈æsakymƒÖ?')) {\n      try {\n        await PocketBaseService.deleteOrder(order.id);\n        onClose();\n      } catch (error) {\n        console.error('Error deleting order:', error);\n      }\n    }\n  };\n\n  const handleAddComment = async () => {\n    if (!order || !newComment.trim()) return;\n    \n    try {\n      // Save comment to Supabase\n      const comment = await SupabaseService.addComment({\n        order_id: order.id,\n        text: newComment.trim()\n      });\n      setComments(prev => [comment, ...prev]);\n      setNewComment('');\n      \n      // Clear contentEditable element\n      const contentEditableElement = document.querySelector('[contenteditable=\"true\"]') as HTMLElement;\n      if (contentEditableElement) {\n        contentEditableElement.textContent = '';\n      }\n    } catch (error) {\n      console.error('Error adding comment:', error);\n      // Fallback: create temporary comment if Supabase fails\n      const tempComment = {\n        id: `temp-${Date.now()}`,\n        text: newComment.trim(),\n        created_at: new Date().toISOString(),\n        order_id: order.id\n      } as Comment;\n      \n      setComments(prev => [tempComment, ...prev]);\n      setNewComment('');\n      \n      // Clear contentEditable element\n      const contentEditableElement = document.querySelector('[contenteditable=\"true\"]') as HTMLElement;\n      if (contentEditableElement) {\n        contentEditableElement.textContent = '';\n      }\n    }\n  };\n\n  const handleAddReminder = async () => {\n    if (!order || !reminderDate || !reminderMessage.trim()) return;\n    \n    try {\n      // Convert date to proper format for Supabase\n      const formattedDate = new Date(reminderDate).toISOString().split('T')[0];\n      \n      // Save reminder to Supabase\n      const reminder = await SupabaseService.addReminder(order.id, {\n        due_date: formattedDate,\n        title: reminderMessage.trim(),\n        is_completed: false\n      });\n      setReminders(prev => [...prev, reminder]);\n      setReminderDate('');\n      setReminderMessage('');\n    } catch (error) {\n      console.error('Error adding reminder:', error);\n      // Fallback: create temporary reminder if Supabase fails\n              const tempReminder = {\n          id: `temp-${Date.now()}`,\n          due_date: reminderDate,\n          title: reminderMessage.trim(),\n          is_completed: false,\n          order_id: order.id,\n          created_at: new Date().toISOString()\n        } as Reminder;\n      \n      setReminders(prev => [...prev, tempReminder]);\n      setReminderDate('');\n      setReminderMessage('');\n    }\n  };\n\n  const handleDeleteReminder = async (reminderId: string) => {\n    try {\n      await SupabaseService.deleteReminder(reminderId);\n      setReminders(prev => prev.filter(r => r.id !== reminderId));\n    } catch (error) {\n      console.error('Error deleting reminder:', error);\n    }\n  };\n\n  const handlePrintscreenView = (printscreen: FileAttachment) => {\n    window.open(printscreen.file_url, '_blank');\n  };\n\n  const handlePaste = async (e: React.ClipboardEvent) => {\n    const items = e.clipboardData?.items;\n    if (!items || !order) return;\n\n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (item.type.startsWith('image/')) {\n        e.preventDefault();\n        \n        const file = item.getAsFile();\n        if (!file) continue;\n\n        try {\n          // Upload printscreen\n          const uploadedFile = await SupabaseService.uploadPrintscreen(order.id, file);\n          \n          // Add to pending printscreens for immediate display\n          setPendingPrintscreens(prev => [...prev, uploadedFile]);\n          \n        } catch (error) {\n          console.error('Error uploading printscreen:', error);\n        }\n      }\n    }\n  };\n\n  const formatDateForDisplay = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      return date.toISOString().split('T')[0];\n    } catch {\n      return dateString;\n    }\n  };\n\n  const calculateWeek = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      // ISO 8601 week calculation\n      \n      // Adjust for ISO week numbering (week 1 starts on Monday of first week with 4+ days)\n      const jan4 = new Date(date.getFullYear(), 0, 4);\n      const jan4Weekday = jan4.getDay() || 7; // Convert Sunday (0) to 7\n      const week1Start = new Date(jan4);\n      week1Start.setDate(jan4.getDate() - jan4Weekday + 1);\n      \n      const daysFromWeek1 = Math.floor((date.getTime() - week1Start.getTime()) / (24 * 60 * 60 * 1000));\n      const isoWeekNumber = Math.ceil((daysFromWeek1 + 1) / 7);\n      \n      return `W${isoWeekNumber}`;\n    } catch {\n      return '';\n    }\n  };\n\n  const calculateMonthlyDistribution = (fromDate: string, toDate: string, totalAmount: number) => {\n    try {\n      if (!fromDate || !toDate || !totalAmount) return [];\n      \n      const cleanFromDate = fromDate.split(' ')[0];\n      const cleanToDate = toDate.split(' ')[0];\n      \n      const [startYear, startMonth, startDay] = cleanFromDate.split('-').map(Number);\n      const [endYear, endMonth, endDay] = cleanToDate.split('-').map(Number);\n      \n      const start = new Date(startYear, startMonth - 1, startDay);\n      const end = new Date(endYear, endMonth - 1, endDay);\n      \n      if (isNaN(start.getTime()) || isNaN(end.getTime())) {\n        return [];\n      }\n      \n      let manualDayCount = 0;\n      let checkDate = new Date(start);\n      while (checkDate <= end) {\n        manualDayCount++;\n        const nextCheckDate = new Date(checkDate);\n        nextCheckDate.setDate(nextCheckDate.getDate() + 1);\n        checkDate = nextCheckDate;\n      }\n      \n      const monthlyDistribution: Array<{\n        month: string;\n        year: number;\n        days: number;\n        amount: number;\n        monthName: string;\n      }> = [];\n      \n      const monthNames = [\n        'sausis', 'vasaris', 'kovas', 'balandis', 'gegu≈æƒó', 'bir≈æelis',\n        'liepa', 'rugpj≈´tis', 'rugsƒójis', 'spalis', 'lapkritis', 'gruodis'\n      ];\n      \n              const currentDate = new Date(start);\n      const endDate = new Date(end);\n      \n      while (currentDate <= endDate) {\n        const month = currentDate.getMonth() + 1;\n        const year = currentDate.getFullYear();\n        const monthKey = `${year}-${month}`;\n        \n        let monthEntry = monthlyDistribution.find(m => m.month === monthKey);\n        \n        if (!monthEntry) {\n          monthEntry = {\n            month: monthKey,\n            year: year,\n            days: 0,\n            amount: 0,\n            monthName: monthNames[month - 1]\n          };\n          monthlyDistribution.push(monthEntry);\n        }\n        \n        monthEntry.days++;\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n      \n      monthlyDistribution.forEach(month => {\n        month.amount = (month.days / manualDayCount) * totalAmount;\n      });\n      \n      return monthlyDistribution.map(m => ({\n        month: parseInt(m.month.split('-')[1]),\n        year: m.year,\n        monthName: m.monthName,\n        days: m.days,\n        amount: m.amount\n      }));\n    } catch (error) {\n      console.error('Error in calculateMonthlyDistribution:', error);\n      return [];\n    }\n  };\n  \n  const startWeek = formData.from ? calculateWeek(formData.from) : '';\n  const endWeek = formData.to ? calculateWeek(formData.to) : '';\n  const weeksDisplay = startWeek && endWeek ? `${startWeek} ‚Üí ${endWeek}` : startWeek || endWeek || '';\n\n  if (!isOpen || !order) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onKeyDown={(e) => {\n        if (e.key === 'Escape') {\n          onClose();\n        }\n      }}\n      tabIndex={0}\n    >\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">{order.client}</h2>\n            <p className=\"text-gray-600\">{order.agency} | {order.invoice_id}</p>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm font-medium text-gray-700\">Media</span>\n              <button\n                type=\"button\"\n                onClick={() => handleInputChange('media_received', !formData.media_received)}\n                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${\n                  formData.media_received ? 'bg-green-300' : 'bg-gray-200'\n                }`}\n              >\n                <span\n                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                    formData.media_received ? 'translate-x-6' : 'translate-x-1'\n                  }`}\n                />\n              </button>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm font-medium text-gray-700\">SƒÖskaita</span>\n              <button\n                type=\"button\"\n                onClick={() => handleInputChange('invoice_sent', !formData.invoice_sent)}\n                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${\n                  formData.invoice_sent ? 'bg-green-300' : 'bg-gray-200'\n                }`}\n              >\n                <span\n                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                    formData.invoice_sent ? 'translate-x-6' : 'translate-x-1'\n                  }`}\n                />\n              </button>\n            </div>\n            \n          <button\n              type=\"button\"\n            onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 transition-colors ml-4\"\n          >\n            <XMarkIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-3\">\n          {/* Main Fields */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Pavadinimas\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={formData.client || ''}\n                      onChange={(e) => handleInputChange('client', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Statusas\n                    </label>\n                    <select\n                      value={formData.approved ? 'taip' : 'ne'}\n                      onChange={(e) => handleInputChange('approved', e.target.value === 'taip')}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    >\n                <option value=\"ne\">Nepatvirtinta</option>\n                      <option value=\"taip\">Patvirtinta</option>\n                <option value=\"rezervuota\">Rezervuota</option>\n                <option value=\"at≈°aukta\">At≈°aukta</option>\n                    </select>\n                  </div>\n                  </div>\n\n          {/* Dates Section */}\n          <div className=\"space-y-2\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Transliacij≈≥ laikotarpis\n                    </label>\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"text\"\n                  value={formData.from ? formatDateForDisplay(formData.from) : ''}\n                  onChange={(e) => handleInputChange('from', e.target.value)}\n                  pattern=\"\\d{4}-\\d{2}-\\d{2}\"\n                  placeholder=\"yyyy-mm-dd\"\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n                <span className=\"text-gray-500\">‚Üí</span>\n                    <input\n                      type=\"text\"\n                      value={formData.to ? formatDateForDisplay(formData.to) : ''}\n                      onChange={(e) => handleInputChange('to', e.target.value)}\n                      pattern=\"\\d{4}-\\d{2}-\\d{2}\"\n                      placeholder=\"yyyy-mm-dd\"\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  </div>\n\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\n              <div className=\"text-sm text-gray-900\">\n                <span className=\"font-normal\">Savaitƒós:</span> <span className=\"font-semibold\">{weeksDisplay}</span>\n              </div>\n            </div>\n              </div>\n\n\n          {/* Sums Section */}\n                {formData.from && formData.to && formData.final_price && (\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <div className=\"space-y-2\">\n                      {(() => {\n                        const distribution = calculateMonthlyDistribution(formData.from, formData.to, formData.final_price);\n                        return distribution.map((month) => (\n                          <div key={month.month} className=\"text-sm text-gray-900\">\n                            {month.monthName.charAt(0).toUpperCase() + month.monthName.slice(1)} {month.year} ({month.days} d.) ‚Üí {month.amount.toFixed(2)}‚Ç¨\n                          </div>\n                        ));\n                      })()}\n                      <div className=\"pt-3 border-t border-gray-200\">\n                        <div className=\"text-sm text-gray-900 flex items-center\">\n                          <span className=\"font-normal\">Viso:</span> <span className=\"font-semibold\">{formData.final_price?.toFixed(2)}‚Ç¨</span>\n                          {quote && (\n                            <button\n                              onClick={() => {\n                                const url = order?.viaduct ? quote.viaduct_link : quote.link;\n                                window.open(url, '_blank');\n                              }}\n                              className=\"ml-2 text-gray-400 hover:text-gray-600 transition-colors\"\n                              title=\"Atidaryti skaiƒçiuoklƒô\"\n                            >\n                              üîó\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n          \n\n          \n\n\n\n\n          {/* Comments Section */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Komentaras\n              </label>\n              <div\n                contentEditable\n                onInput={(e) => setNewComment(e.currentTarget.textContent || '')}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    handleAddComment();\n                  }\n                }}\n                onPaste={handlePaste}\n                data-placeholder=\"ƒÆveskite komentarƒÖ... (Enter - i≈°saugoti, Cmd+V - printscreen)\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-24 resize-none min-h-[6rem] overflow-y-auto\"\n                style={{ whiteSpace: 'pre-wrap' }}\n              />\n              \n              {comments.length > 0 && (\n                <div className=\"mt-4 space-y-2\">\n                  {comments.map((comment) => (\n                    <div key={comment.id} className=\"bg-gray-50 p-3 rounded-lg\">\n                      <div className=\"text-sm text-gray-600 mb-1\">\n                        {new Date(comment.created_at).toLocaleString('lt-LT')}\n                      </div>\n                      <div className=\"text-sm text-gray-900\">{comment.text}</div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Printscreens\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {/* Pending printscreens (just uploaded) */}\n                  {pendingPrintscreens.map((printscreen) => (\n                    <div key={printscreen.id} className=\"relative\">\n                      <Image\n                        src={printscreen.file_url}\n                        alt=\"Printscreen\"\n                        width={64}\n                        height={64}\n                        className=\"w-16 h-16 object-cover rounded border cursor-pointer hover:opacity-80\"\n                        onClick={() => handlePrintscreenView(printscreen)}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={async () => {\n                          try {\n                            await SupabaseService.deleteFile(printscreen.id);\n                            setPendingPrintscreens(prev => prev.filter(p => p.id !== printscreen.id));\n                            setPrintScreens(prev => prev.filter(p => p.id !== printscreen.id));\n                          } catch (error) {\n                            console.error('Error deleting printscreen:', error);\n                          }\n                        }}\n                        className=\"absolute -top-1 -right-1 w-4 h-4 bg-black text-white rounded-full text-xs hover:bg-gray-800 flex items-center justify-center\"\n                      >\n                        √ó\n                      </button>\n                    </div>\n                  ))}\n                  \n                  {/* Existing printscreens */}\n                  {printScreens.map((printscreen) => (\n                    <div key={printscreen.id} className=\"relative\">\n                      <Image\n                        src={printscreen.file_url}\n                        alt=\"Printscreen\"\n                        width={64}\n                        height={64}\n                        className=\"w-16 h-16 object-cover rounded border cursor-pointer hover:opacity-80\"\n                        onClick={() => handlePrintscreenView(printscreen)}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={async () => {\n                          try {\n                            await SupabaseService.deleteFile(printscreen.id);\n                            setPrintScreens(prev => prev.filter(p => p.id !== printscreen.id));\n                          } catch (error) {\n                            console.error('Error deleting printscreen:', error);\n                          }\n                        }}\n                        className=\"absolute -top-1 -right-1 w-4 h-4 bg-black text-white rounded-full text-xs hover:bg-gray-800 flex items-center justify-center\"\n                      >\n                        √ó\n                      </button>\n                    </div>\n                  ))}\n                  \n                  {pendingPrintscreens.length === 0 && printScreens.length === 0 && (\n                    <div className=\"text-sm text-gray-400 italic\">\n                      Cmd+V ƒØ komentaro laukƒÖ pridƒóti printscreen\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Reminders Section */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Data\n              </label>\n              <input\n                type=\"date\"\n                value={reminderDate}\n                onChange={(e) => setReminderDate(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Priminimo ≈æinutƒó\n              </label>\n              <div className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  value={reminderMessage}\n                  onChange={(e) => setReminderMessage(e.target.value)}\n                  placeholder=\"ƒÆveskite priminimo ≈æinutƒô...\"\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={handleAddReminder}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Pridƒóti\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Reminders List */}\n          {reminders.length > 0 && (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-3\">Priminimai</h3>\n              <div className=\"space-y-2\">\n                {reminders.map((reminder) => (\n                  <div key={reminder.id} className=\"bg-gray-50 p-3 rounded-lg flex items-center justify-between\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {new Date(reminder.due_date).toLocaleDateString('lt-LT')}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">{reminder.title}</div>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleDeleteReminder(reminder.id)}\n                      className=\"text-red-600 hover:text-red-800 text-sm\"\n                    >\n                      I≈°trinti\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex items-center justify-between p-6 border-t border-gray-200\">\n          <button\n            type=\"button\"\n            onClick={handleDelete}\n            className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n          >\n            I≈°trinti\n          </button>\n          \n          <div className=\"flex space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\n            >\n              U≈ædaryti\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSave}\n              disabled={loading}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n            >\n              {loading ? 'I≈°saugoma...' : 'I≈°saugoti'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5050, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/components/ReminderNotifications.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { PocketBaseService } from '@/lib/pocketbase';\nimport { Reminder } from '@/types';\n\ninterface ReminderNotificationProps {\n  onClose: () => void;\n  onOpenEditModal: (orderId: string) => void;\n}\n\nexport function ReminderNotifications({ onClose, onOpenEditModal }: ReminderNotificationProps) {\n  const [reminders, setReminders] = useState<Reminder[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [orderClients, setOrderClients] = useState<Record<string, string>>({});\n\n  useEffect(() => {\n    loadAllReminders();\n  }, []);\n\n  const loadAllReminders = async () => {\n    try {\n      // Get reminders that are due today or in the next 7 days, or overdue\n      const today = new Date();\n      const nextWeek = new Date();\n      nextWeek.setDate(today.getDate() + 7);\n      \n      const { data, error } = await supabase\n        .from('reminders')\n        .select('*')\n        .eq('is_completed', false)\n        .lte('due_date', nextWeek.toISOString().split('T')[0]) // Due today or earlier\n        .order('due_date', { ascending: true });\n\n      if (error) throw error;\n      \n      // Filter reminders to show only relevant ones (due today, overdue, or due soon)\n      const relevantReminders = (data || []).filter(reminder => {\n        const dueDate = new Date(reminder.due_date);\n        const today = new Date();\n        const diffTime = dueDate.getTime() - today.getTime();\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        \n        // Show if: overdue, due today, or due in next 3 days\n        return diffDays <= 3;\n      });\n      \n      setReminders(relevantReminders);\n\n      // Get client names for each order\n      if (relevantReminders && relevantReminders.length > 0) {\n        const orderIds = [...new Set(relevantReminders.map(r => r.order_id))];\n        const clients: Record<string, string> = {};\n        \n        for (const orderId of orderIds) {\n          try {\n            const order = await PocketBaseService.getOrder(orderId);\n            clients[orderId] = order.client;\n          } catch (error) {\n            console.error(`Error loading order ${orderId}:`, error);\n            clients[orderId] = 'Ne≈æinomas klientas';\n          }\n        }\n        \n        setOrderClients(clients);\n      }\n    } catch (error) {\n      console.error('Error loading reminders:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"fixed top-4 right-4 z-50 bg-white rounded-xl shadow-2xl border border-gray-100 p-6 max-w-sm backdrop-blur-sm\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent\"></div>\n          <div className=\"text-sm text-gray-600\">Kraunama priminimai...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (reminders.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-3 max-w-sm\">\n      {reminders.map((reminder) => (\n        <div \n          key={reminder.id} \n          className=\"bg-white border border-gray-200 rounded-xl shadow-xl p-5 backdrop-blur-sm hover:shadow-2xl transition-all duration-300 cursor-pointer hover:bg-gray-50\"\n          onClick={() => onOpenEditModal(reminder.order_id)}\n        >\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-red-400 to-pink-500 rounded-full flex items-center justify-center shadow-lg\">\n                <span className=\"text-white text-lg\">!</span>\n              </div>\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center space-x-2 mb-2\">\n                <h4 className=\"text-xs text-gray-600\">Priminimas</h4>\n                <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                  Aktyvus\n                </span>\n              </div>\n              <p className=\"text-sm font-bold text-gray-800 mb-3 leading-relaxed\">\n                {reminder.title}\n              </p>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center space-x-2 text-xs text-gray-600\">\n                  <span className=\"w-1.5 h-1.5 bg-blue-400 rounded-full\"></span>\n                  <span className=\"font-medium\">Klientas:</span>\n                  <span className=\"text-gray-800\">{orderClients[reminder.order_id] || 'Kraunama...'}</span>\n                </div>\n                <div className=\"flex items-center space-x-2 text-xs text-gray-600\">\n                  <span className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></span>\n                  <span className=\"font-medium\">Data:</span>\n                  <span className=\"text-gray-800\">{new Date(reminder.due_date).toLocaleDateString('lt-LT')}</span>\n                  {(() => {\n                    const dueDate = new Date(reminder.due_date);\n                    const today = new Date();\n                    const diffTime = dueDate.getTime() - today.getTime();\n                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n                    \n                    if (diffDays < 0) {\n                      return <span className=\"text-red-600 font-medium\"> (Vƒóluoja {Math.abs(diffDays)} d.)</span>;\n                    } else if (diffDays === 0) {\n                      return <span className=\"text-orange-600 font-medium\"> (≈†iandien!)</span>;\n                    } else if (diffDays <= 3) {\n                      return <span className=\"text-blue-600 font-medium\"> (u≈æ {diffDays} d.)</span>;\n                    }\n                    return null;\n                  })()}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n      \n      <div className=\"flex justify-end pt-2\">\n        <button\n          onClick={onClose}\n          className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 bg-white/80 hover:bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 backdrop-blur-sm\"\n        >\n          <span>U≈ædaryti</span>\n          <svg className=\"ml-1.5 w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5405, "column": 0}, "map": {"version":3,"sources":["file:///Users/renatasparojus/piksel-pocket/piksel-orders-app/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { OrdersTable } from '@/components/OrdersTable';\nimport { Header } from '@/components/Header';\nimport { SearchAndFilters } from '@/components/SearchAndFilters';\nimport { AddOrderModal } from '@/components/AddOrderModal';\nimport { OrderDetailsModal } from '@/components/OrderDetailsModal';\nimport { EditOrderModal } from '@/components/EditOrderModal';\nimport { ReminderNotifications } from '@/components/ReminderNotifications';\nimport { WeekNumbersModal } from '@/components/WeekNumbersModal';\nimport { PocketBaseService } from '@/lib/pocketbase';\nimport { Order } from '@/types';\n\nexport default function Home() {\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [isWeekNumbersModalOpen, setIsWeekNumbersModalOpen] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null);\n  const [editingOrder, setEditingOrder] = useState<Order | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showReminders, setShowReminders] = useState(true);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  // Load dark mode preference from localStorage\n  useEffect(() => {\n    const savedDarkMode = localStorage.getItem('darkMode');\n    if (savedDarkMode !== null) {\n      setIsDarkMode(JSON.parse(savedDarkMode));\n    }\n  }, []);\n\n  // Save dark mode preference to localStorage\n  useEffect(() => {\n    localStorage.setItem('darkMode', JSON.stringify(isDarkMode));\n    // Apply dark mode class to document\n    if (isDarkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [isDarkMode]);\n\n  const toggleDarkMode = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n  \n  // Get current date for default filters\n  const now = new Date();\n  const currentMonth = String(now.getMonth() + 1).padStart(2, '0'); // 01-12\n  const currentYear = now.getFullYear();\n  \n  const [filters, setFilters] = useState({\n    status: 'taip', // Default: Patvirtinta - rodo tik patvirtintus u≈æsakymus\n    month: currentMonth, // Default: einamasis mƒónuo (dabar rugpj≈´tis)\n    year: currentYear.toString(), // Default: einamieji metai (2025)\n    client: '',\n    agency: '',\n    media_received: '',\n    invoice_sent: ''\n  });\n\n\n\n  const handleEditOrder = (order: Order) => {\n    setEditingOrder(order);\n  };\n\n  const handleOrderUpdated = () => {\n    // Force OrdersTable to refresh by updating the refresh key\n    setRefreshKey(prev => prev + 1);\n    setEditingOrder(null);\n  };\n\n  const handleOpenEditModalFromReminder = async (orderId: string) => {\n    try {\n      const order = await PocketBaseService.getOrder(orderId);\n      setEditingOrder(order);\n    } catch (error) {\n      console.error('Error loading order for edit:', error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <Header \n        onAddOrder={() => setIsAddModalOpen(true)} \n        isDarkMode={isDarkMode}\n        onToggleDarkMode={toggleDarkMode}\n        onShowWeekNumbers={() => setIsWeekNumbersModalOpen(true)}\n      />\n      \n      <main className=\"container mx-auto px-4 py-6\">\n        <SearchAndFilters\n          searchQuery={searchQuery}\n          onSearchChange={setSearchQuery}\n          filters={filters}\n          onFiltersChange={setFilters}\n        />\n        \n        <OrdersTable\n          key={refreshKey}\n          searchQuery={searchQuery}\n          filters={filters}\n          onEditOrder={handleEditOrder}\n        />\n      </main>\n\n      {/* Add Order Modal */}\n      <AddOrderModal\n        isOpen={isAddModalOpen}\n        onClose={() => setIsAddModalOpen(false)}\n      />\n\n      {/* Order Details Modal */}\n      <OrderDetailsModal\n        order={selectedOrder}\n        isOpen={!!selectedOrder}\n        onClose={() => setSelectedOrder(null)}\n      />\n\n      {/* Edit Order Modal */}\n      <EditOrderModal\n        order={editingOrder}\n        isOpen={!!editingOrder}\n        onClose={() => setEditingOrder(null)}\n        onOrderUpdated={handleOrderUpdated}\n      />\n\n      {/* Reminder Notifications */}\n      {showReminders && (\n        <ReminderNotifications\n          onClose={() => setShowReminders(false)}\n          onOpenEditModal={handleOpenEditModalFromReminder}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAXA;;;;;;;;;;;AAce,SAAS;IACtB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,iNAAQ,EAAC;IACrE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAe;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAe;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,8CAA8C;IAC9C,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB,aAAa,OAAO,CAAC;QAC3C,IAAI,kBAAkB,MAAM;YAC1B,cAAc,KAAK,KAAK,CAAC;QAC3B;IACF,GAAG,EAAE;IAEL,4CAA4C;IAC5C,IAAA,kNAAS,EAAC;QACR,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;QAChD,oCAAoC;QACpC,IAAI,YAAY;YACd,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACzC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5C;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,iBAAiB;QACrB,cAAc,CAAC;IACjB;IAEA,uCAAuC;IACvC,MAAM,MAAM,IAAI;IAChB,MAAM,eAAe,OAAO,IAAI,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG,MAAM,QAAQ;IAC1E,MAAM,cAAc,IAAI,WAAW;IAEnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;QACrC,QAAQ;QACR,OAAO;QACP,MAAM,YAAY,QAAQ;QAC1B,QAAQ;QACR,QAAQ;QACR,gBAAgB;QAChB,cAAc;IAChB;IAIA,MAAM,kBAAkB,CAAC;QACvB,gBAAgB;IAClB;IAEA,MAAM,qBAAqB;QACzB,2DAA2D;QAC3D,cAAc,CAAA,OAAQ,OAAO;QAC7B,gBAAgB;IAClB;IAEA,MAAM,kCAAkC,OAAO;QAC7C,IAAI;YACF,MAAM,QAAQ,MAAM,6IAAiB,CAAC,QAAQ,CAAC;YAC/C,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,sIAAM;gBACL,YAAY,IAAM,kBAAkB;gBACpC,YAAY;gBACZ,kBAAkB;gBAClB,mBAAmB,IAAM,0BAA0B;;;;;;0BAGrD,8OAAC;gBAAK,WAAU;;kCACd,8OAAC,0JAAgB;wBACf,aAAa;wBACb,gBAAgB;wBAChB,SAAS;wBACT,iBAAiB;;;;;;kCAGnB,8OAAC,gJAAW;wBAEV,aAAa;wBACb,SAAS;wBACT,aAAa;uBAHR;;;;;;;;;;;0BAQT,8OAAC,oJAAa;gBACZ,QAAQ;gBACR,SAAS,IAAM,kBAAkB;;;;;;0BAInC,8OAAC,4JAAiB;gBAChB,OAAO;gBACP,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,iBAAiB;;;;;;0BAIlC,8OAAC,sJAAc;gBACb,OAAO;gBACP,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,gBAAgB;gBAC/B,gBAAgB;;;;;;YAIjB,+BACC,8OAAC,oKAAqB;gBACpB,SAAS,IAAM,iBAAiB;gBAChC,iBAAiB;;;;;;;;;;;;AAK3B","debugId":null}}]
}